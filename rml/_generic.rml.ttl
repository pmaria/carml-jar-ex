@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sd: <http://www.w3.org/ns/sparql-service-description#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix dct: <http://purl.org/dc/terms/> .
@prefix pdok: <http://data.pdok.nl/def/pdok#> .
@prefix time: <http://www.w3.org/2006/time#> .
@prefix schema: <http://schema.org/> .
@prefix org: <http://www.w3.org/ns/org#> .
@prefix ceo: <https://linkeddata.cultureelerfgoed.nl/def/ceo#> .
@prefix ceo_beg: <http://linkeddata.cultureelerfgoed.nl/ceo/id/begrip> .

@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix ql: <http://semweb.mmlab.be/ns/ql#>.
@prefix fno: <http://semweb.datasciencelab.be/ns/function#> .
@prefix fnml: <http://semweb.mmlab.be/ns/fnml#> .
@prefix carml: <http://carml.taxonic.com/carml/> .

#@prefix fnPdok: <http://data.pdok.nl/mappings/functions#> .
@prefix ceog: <http://linkeddata.cultureelerfgoed.nl/def/ceo> .
@prefix : <http://linkeddata.cultureelerfgoed.nl/mappings/ceo#> .

######################################################################################
# Generic CEO Predicate Object Maps
######################################################################################

:CEO_choId_POM a rr:PredicateObjectMap ;
  rr:predicate ceo:cultuurhistorischObjectnummer ;
  rr:objectMap [
    rml:reference "choId" ;
    rr:datatype xsd:integer ;
    ]
.

:CEO_heeftBasisregistratieRelatie_POM a rr:PredicateObjectMap ;
  rr:predicate ceo:heeftBasisregistratieRelatie ;
  rr:objectMap [
    rr:parentTriplesMap :BasisregistratieRelatie ;
    rr:joinCondition [
      rr:child "basisregistratie/basisregistratie_id" ;
      rr:parent "basisregistratie_id" ;
    ] ;
  ] ;
.

:CEO_samenhang_POM a rr:PredicateObjectMap ;
  rr:predicate ceo:heeftSamenhang ;
  rr:objectMap [
    rr:parentTriplesMap :CEO_samenhang ;
      rr:joinCondition [
        rr:child "samenhang/isRelatieVan/choId" ;
        rr:parent "isRelatieVan/choId" ;
      ] ;
    ] ;
.

######################################################################################
# Samenhang Triples
######################################################################################

:CEO_samenhang a rr:TriplesMap ;
  rml:logicalSource [
    rml:source [
     a carml:Stream ;
      ] ;
    rml:referenceFormulation ql:XPath ;
    rml:iterator "/cultuurHistorischeObjecten/rijksmonument/samenhang" ;
  ] ;
  rr:subjectMap [
    rr:template "https://linkeddata.cultureelerfgoed.nl/cho-kennis/id/samenhang/{../choId}-{isRelatieVan/choId}" ;
    rr:class ceo:Samenhang ;
    rr:graph ceog: ;
  ] ;
  rr:predicateObjectMap [
    rr:predicate ceo:samenhangToelichting ;
    rr:objectMap [
      rml:reference "toelichting" ;
    ] ;
  ] ;
.

######################################################################################
# BasisregistratieRelatie Triples
######################################################################################

:BasisregistratieRelatie a rr:TriplesMap ;
  rml:logicalSource [
    rml:source [
     a carml:Stream ;
      ] ;
    rml:referenceFormulation ql:XPath ;
    rml:iterator "/cultuurHistorischeObjecten/rijksmonument/basisregistratie" ;
  ] ;
  rr:subjectMap [
    rr:template "https://linkeddata.cultureelerfgoed.nl/cho-kennis/id/basisregistratierelatie/{basisregistratie_id}" ;
    rr:class ceo:BasisregistratieRelatie ;
  ] ;
  rr:predicateObjectMap
    :CEO_heeftBRKRelatie_POM ;
.

:CEO_heeftBRKRelatie_POM a rr:PredicateObjectMap ;
  rr:predicate ceo:heeftBRKRelatie ;
  rr:objectMap [
    rr:parentTriplesMap :BRKRelatie ;
    rr:joinCondition 
      [
        rr:child "brk/gemeentecode" ;
        rr:parent "gemeentecode" ;
      ] ,
      [
        rr:child "brk/sectie" ;
        rr:parent "sectie" ;
      ] ,
      [
        rr:child "brk/perceelnummer" ;
        rr:parent "perceelnummer" ;
      ] ;
  ] ;
.

######################################################################################
# BRKRelatie Triples
######################################################################################

:BRKRelatie a rr:TriplesMap ;
  rml:logicalSource [
    rml:source [
     a carml:Stream ;
      ] ;
    rml:referenceFormulation ql:XPath ;
    rml:iterator "/cultuurHistorischeObjecten/rijksmonument/basisregistratie/brk" ;
  ] ;
  rr:subjectMap [
    rr:template "https://linkeddata.cultureelerfgoed.nl/cho-kennis/id/brkrelatie/{gemeentecode}.{sectie}.{perceelnummer}" ;
    rr:class ceo:BRKRelatie ;
  ] ;
.

######################################################################################
# Concept Triples
######################################################################################

# :Concept a rr:TriplesMap ;
#   rml:logicalSource [
#     rml:source [
#       a carml:Stream ;
#     ] ;
#     rml:referenceFormulation ql:XPath ;
#     rml:iterator "//*[*/name()='preflabel']" ;
#   ] ;
#   rr:subjectMap [
#     rml:reference "uri" ;
#     rr:termType rr:IRI ;
#     # rr:class skos:Concept ;
#   ] ;
#   rr:predicateObjectMap [
#     rr:predicate skos:prefLabel ;
#     rr:objectMap [
#       rml:reference "preflabel" ;
#       rr:language "nl" ;
#     ] ;
#   ] ;
# .